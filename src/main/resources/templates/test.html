<!DOCTYPE html>
<html>

<head>
    <title>Map Test</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>map</title>
    <link rel="stylesheet" href="../static/assets/style/base.css">
    <!--[if IE]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
</head>

<body>
<div id="map"></div>


<script async defer
        src="http://maps.google.cn/maps/api/js?region=cn&language=zh-CN&key=AIzaSyAxzDAlq6v3qHB2C1CgT2eP8r7bIqL3Olo&callback=initMap"></script>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="../static/assets/js/mapStyle.js"></script>
<script src="../static/assets/js/Bus.js"></script>
<script>
    function initMap() {
        var center = new google.maps.LatLng(30.44384738553116, 120.25853820848502);
        map = new google.maps.Map(document.querySelector('#map'), {
            zoom: 15,
            center: center,
            styles: mapStyles,
            mapTypeId: google.maps.MapTypeId.TERRAIN,
            streetViewControl: false,
            fullscreenControl: false,
            // mapTypeControl: false,
            zoomControl: false,
            scaleControl: true
        });

        new google.maps.Marker({
            clickable: false,
            // cursor: '',
            // zIndex: 999,
            position: {
                lat: 30.44218718186525,
                lng: 120.25875544065857
            },
            icon: '../static/assets/images/bg_parking_15.gif',
            map: map
        });

        var fencePoints = {"bgPoint":{"x":120.26966410452643,"y":30.447824566232693},"parkArea":[{"area":[{"x":120.25904494255566,"y":30.44396650497846},{"x":120.2591668688444,"y":30.443856500838727},{"x":120.25765765884604,"y":30.443166083949663},{"x":120.25760270474214,"y":30.44332511588374}],"name":"3\u533A"},{"area":[{"x":120.25775053962364,"y":30.442388905054543},{"x":120.25777851460802,"y":30.44228588358403},{"x":120.25805635994456,"y":30.442375945862675},{"x":120.25805737009333,"y":30.442505978020563}],"name":"13\u533A"},{"area":[{"x":120.25928679024244,"y":30.443666477084534},{"x":120.25934674747057,"y":30.443526454296183},{"x":120.25785751604772,"y":30.44286603757236},{"x":120.25779756282417,"y":30.443006063654433}],"name":"1\u533A"},{"area":[{"x":120.2591668688444,"y":30.443856500838727},{"x":120.25921683058381,"y":30.443711474577164},{"x":120.25770761844029,"y":30.44303605862942},{"x":120.25765765884604,"y":30.443166083949663}],"name":"2\u533A"},{"area":[{"x":120.25772257243007,"y":30.442585949718605},{"x":120.25754767420608,"y":30.442555918941128},{"x":120.25683821440239,"y":30.44380614464772},{"x":120.25684822129195,"y":30.443966185304944},{"x":120.25703810467625,"y":30.44399621313872},{"x":120.25698812265668,"y":30.443836168010886}],"name":"10\u533A"},{"area":[{"x":120.25893701724372,"y":30.44417153579853},{"x":120.25902695792382,"y":30.444036518959884},{"x":120.2574877762725,"y":30.443356108567425},{"x":120.25741782844749,"y":30.44347612935763}],"name":"4\u533A"},{"area":[{"x":120.25889205137126,"y":30.444291557359858},{"x":120.25893701724372,"y":30.44417153579853},{"x":120.25741782844749,"y":30.44347612935763},{"x":120.25737786590437,"y":30.4436361639418}],"name":"5\u533A"},{"area":[{"x":120.25881709813882,"y":30.444366562476088},{"x":120.25879712137863,"y":30.444516596141977},{"x":120.25724796090667,"y":30.443826195179614},{"x":120.2573179081975,"y":30.44370617389697}],"name":"6\u533A"},{"area":[{"x":120.25869718586709,"y":30.44463660836097},{"x":120.25879712137863,"y":30.444516596141977},{"x":120.25724796090667,"y":30.443826195179614},{"x":120.25716802165081,"y":30.44396622045523}],"name":"7\u533A"},{"area":[{"x":120.2585972607046,"y":30.444876650798353},{"x":120.2586871987762,"y":30.444726628981336},{"x":120.25740789061253,"y":30.44415629645006},{"x":120.2573179577052,"y":30.444306322548044}],"name":"8\u533A"},{"area":[{"x":120.25894707787762,"y":30.444971736276415},{"x":120.258897091991,"y":30.444816688619238},{"x":120.2586172533746,"y":30.44492166539638},{"x":120.25738791841766,"y":30.44434634107585},{"x":120.25734795345359,"y":30.444476368395264},{"x":120.25856729380452,"y":30.44507669545319}],"name":"9\u533A"},{"area":[{"x":120.2571680884877,"y":30.444776421424255},{"x":120.25726801053871,"y":30.444576383523515},{"x":120.25771775691113,"y":30.44478649339843},{"x":120.25766780142129,"y":30.444966531356396}],"name":"11\u533A"},{"area":[{"x":120.25694816253619,"y":30.44401620825893},{"x":120.25712809586341,"y":30.444566364653085},{"x":120.25733796531809,"y":30.44454638454707},{"x":120.25717801961174,"y":30.444016234003115}],"name":"S1-S2"},{"area":[{"x":120.25772257243007,"y":30.442585949718605},{"x":120.25789747450241,"y":30.442645989049954},{"x":120.25741782597217,"y":30.443446121941115},{"x":120.25723792990962,"y":30.443376082682587}],"name":"S3"},{"area":[{"x":120.2566483413875,"y":30.443881144256984},{"x":120.25766557158283,"y":30.442165838589222},{"x":120.25923673470733,"y":30.442676222856246},{"x":120.26084607614325,"y":30.444216965366877},{"x":120.25968677242444,"y":30.445937122766836},{"x":120.25888715951402,"y":30.445569874241762},{"x":120.25787969872108,"y":30.445236627985075},{"x":120.2579146718455,"y":30.445158613594288},{"x":120.25767580491991,"y":30.44506655731097},{"x":120.25762783801792,"y":30.44512156455116},{"x":120.25730302445517,"y":30.44500449410365},{"x":120.25696621975342,"y":30.44484641618127}],"name":"\u4E34\u5E73\u5176\u5B83"},{"area":[{"x":120.25926676685965,"y":30.443256371808154},{"x":120.25942667639205,"y":30.44316638133748},{"x":120.25973654763003,"y":30.443516532105626},{"x":120.25971657087058,"y":30.443676567425022}],"name":"S4"},{"area":[{"x":120.25925685046545,"y":30.44420660496495},{"x":120.25958669267126,"y":30.444356708603074},{"x":120.25986650755264,"y":30.443816634369597},{"x":120.25953666451488,"y":30.44370653721675}],"name":"S5-S6"},{"area":[{"x":120.25953666451488,"y":30.44370653721675},{"x":120.25888709655977,"y":30.44480668432108},{"x":120.25867720096375,"y":30.444686617310477},{"x":120.25932676280999,"y":30.44358646517284}],"name":"S7"},{"area":[{"x":120.25860727250789,"y":30.445086704730432},{"x":120.2593668394036,"y":30.44476676565823},{"x":120.25946680431554,"y":30.44496683549067},{"x":120.2586072890099,"y":30.4452867545127}],"name":"S8-S9"},{"area":[{"x":120.25796764495941,"y":30.44520663323961},{"x":120.25801760194699,"y":30.44503659829527},{"x":120.25871723267004,"y":30.44533678594693},{"x":120.25868726478384,"y":30.445526828063347}],"name":"S10"}],"fence":[{"x":120.2566483413875,"y":30.443881144256984},{"x":120.25766557158283,"y":30.442165838589222},{"x":120.25923673470733,"y":30.442676222856246},{"x":120.26084607614325,"y":30.444216965366877},{"x":120.25968677242444,"y":30.445937122766836},{"x":120.25888715951402,"y":30.445569874241762},{"x":120.25787969872108,"y":30.445236627985075},{"x":120.2579146718455,"y":30.445158613594288},{"x":120.25767580491991,"y":30.44506655731097},{"x":120.25762783801792,"y":30.44512156455116},{"x":120.25730302445517,"y":30.44500449410365},{"x":120.25696621975342,"y":30.44484641618127}],"centerPoint":{"x":120.25853820848502,"y":30.44384738553116}};
        var coords = [];
        fencePoints.fence.forEach(function (item) {
            coords.push({
                lat: item.y,
                lng: item.x
            })
        })

        new google.maps.Polygon({
            map: map,
            paths: coords,
            clickable: false,
            strokeColor: '#f30',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            // fillColor: '#fff',
            fillOpacity: 0.35
        });

        /*var path = [{
          lat: 30.444437597347516,
          lng: 120.25999516557287
        }, {
          lat: 30.443872379745503,
          lng: 120.26006288337764
        }, {
          lat: 30.44384945836818,
          lng: 120.2600660828435
        }]

        var bus = new Bus(map, path[0], {
          id: '9-0738',
          showRoute: true,
          icon: {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 5,
            fillColor: '#e12a31',
            strokeColor: '#e12a31'
          }
          // icon: '../static/assets/images/car.png',
        });

        bus.move(path[0], path[1]);
        bus.click(function (e) {
          console.log(e, bus);

        });*/
    }


</script>
</body>

</html>